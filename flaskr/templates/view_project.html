{% extends 'layout.html' %}
{% set active_page = "gallery" %}

{% block body %}

 <div class="container-md text-center" style="max-width: 100%;">
        {% include 'includes/_messages.html' %}
    <header class="container-md" style="position:relative; max-width: 100%;">
        <div class="container-md" style="margin: 10px 10px">
            <div class="row text-center">
                <div class="col-sm-auto" style="padding:0;">
                    <div style="background-color: rgba(255,255,255,0.0);">
                        <h1 style="font-weight: 600;" class="">{{ project_name }}</h1>
                    </div>
                </div>
            </div>
            <div class="row text-center">
                <div class="col-sm-auto" style="padding:0;">
                    <div style="background-color: rgba(255,255,255, 0.0);">
                        <h3>{{ project_town }}, NH</h3>
                    </div>
                </div>
            </div>
        </div>
    </header>

</div>


{% if session.logged_in %}
{% from "includes/_formhelpers.html" import render_field %}
<div class="container-md" style="margin-bottom: 20px;">
    <div class="row align-items-end justify-content-center">
        <div class="col-md text-md admin-forms font-med-bold text-center" style="margin-top: 10px;">
            <h1 class="display-6">Upload Images</h1>
        </div>
    </div>

    <form method="post" action="" class="" enctype="multipart/form-data">
        <div class="row justify-content-center text-md" style="font-weight: 500;">
            <div class="col-md-5 form-labels">
                    {{ image_form.image(class="form-control", style="", multiple="multiple") }}
            </div>
        </div>
        <div class="row justify-content-center text-center">
            <div class="col-md">
                <button class="buttons btn btn-outline-primary"
                    data-callback='onSubmit'
                    data-action='submit'
                    name="upload-image">Upload</button>
            </div>
        </div>
    </form>
</div>
{% endif %}



    <!-- images from static/uploads -->
<div class="container-md image-container" style="clear:both; max-width: 100%;">
    <div class="row justify-content-evenly">
        {% for photo in photos %}
        <div class="col-md-4 text-center">
            <div>
                <a href="{{ url_for('blueprint.view_image', filename=photo.filename) }}">
                    <!--<img class="img-thumbnail" src="{{photo.image_path}}" alt="photo.filename" style="width: 300px; height: 300px;">-->
                    <img class="img-thumbnail" src="{{url_for('static', filename='uploads'+'/'+ project_name + photo.filename)}}" alt="photo.filename" style="width: 300px; height: 300px;">
                </a>
            </div>

            {% if session.logged_in %}
            <!--check value in db: 0 == false | 1 == true-->
            <div class="container-md" style="padding: 10px 0px;">
              <form
                  {% if photo.isChecked == 0 %}
                      action="{{ url_for('blueprint.update_check_image', image_id=photo.image_id, isChecked=1, project_id=photo.project_id) }}" method="post"
                  {% else %}
                      action="{{ url_for('blueprint.update_check_image', image_id=photo.image_id, isChecked=0, project_id=photo.project_id) }}" method="post"
                  {% endif %}
              >

                        <input style="outline: 1px solid;" class="form-check-input" type="checkbox" value="" id="flexCheck" name="check" onChange="this.form.submit()" {% if photo.isChecked %} checked {% endif %}>
                  </form>
                    <label class="form-check-label font-med-bold" for="flexCheck">
                      Add to Gallery slideshow
                    </label>

            </div>



            <div class="btn btn-default">
              <form action="{{ url_for('blueprint.delete_image', image_id=photo.image_id, project_id=photo.project_id, filename=photo.filename) }}" method="post">
                  <input type="submit" value="Delete" name="delete-button" onclick="return confirm('Are you sure you want to delete this image?');" class="btn btn-danger">
              </form>
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>

</div>


{% endblock %}