{% extends 'layout.html' %}
{% set active_page = "admin" %}
{% block body %}

<!--replace background-->
{% from "includes/_formhelpers.html" import render_field %}
<div class="" style="max-width: 100%;">
    <form method="post" action="" class="" enctype="multipart/form-data">
        <div class="row justify-content-end" style="font-weight: 500;">
            <div class="col-3 form-labels bg-dark bg-opacity-25" style="text-align: right;">
                    <p class="font-med-bold text-normal upload_bg text-light">Change Background</p>
                {{ image_form.bg_image(class="form-control", style="font-size: 10px;") }}
                    <button class="buttons btn btn-outline-primary btn-sm"
                    data-callback='onSubmit'
                    data-action='submit'
                    name="upload-bg-image" style="">Upload</button>

            </div>
        </div>
    </form>
</div>


<div>
   {% include 'includes/_messages.html' %}

    <h1 class="text-light">Admin Portal</h1>
    <hr>
    <h4 class="font-weight-lighter p-3 text-light bg-dark bg-opacity-50">Hi, {{ name }}.
        <br> You can send testimonial requests, add a new project, and approve pending testimonials here.
    </h4>
    <br>
</div>


<div class="container-md bg-dark bg-opacity-50" style="max-width: 100%; margin-bottom: 15px;">
    <form method="post" action="" class="">
        <div class="row align-items-center">
            <div class="col-md-auto text-md admin-forms font-med-bold text-center">
                <label class="text-light">Send a testimonial request</label>
            </div>
            <div class="row align-items-start admin-forms" style="margin: 1px 10px; padding-right: 15px;">
                {% for field in form %}
                <div class="col-md-auto">
                    {% if field.id == 'email' %}
                    {{field(class="form-control", placeholder="Email")}}
                    {% elif field.id == 'name' %}
                    {{field(class="form-control", placeholder="Name")}}
                    {% endif %}
                </div>

                {% endfor %}
                <div class="col-md-auto text-center" style="">
                    <button type="submit" class="btn btn-outline-success" name="send-request">Send</button>
                </div>
            </div>
        </div>
    </form>
</div>

{% from "includes/_formhelpers.html" import render_field %}
<div class="container-md bg-dark bg-opacity-75" style="margin-bottom: 20px; max-width: 100%;">
        <div class="row align-items-end">
            <!--{% from "includes/_formhelpers.html" import render_field %}-->
            <div class="col-md-auto text-md admin-forms font-med-bold" style="margin-top: 10px;">
                <h1 class="display-6 text-light">Add a Project</h1>
            </div>
        </div>
        <div class="row align-items-end">
            <div class="col-md-auto" style="text-align: center; padding: 0px 20px;">
                <a href="{{ url_for('blueprint.view_all_projects') }}" class="text-lg">View Added Projects</a>
            </div>
        </div>

    <form method="post" action="" class="" enctype="multipart/form-data">
        <div class="row justify-content-evenly text-md" style="font-weight: 500; margin: 0px 10px;">

            <div class="col-md-auto form-labels active" id="tab_1" data-tab-info style="">
                <div class="col-md-auto form-labels font-med-bold text-center" style="font-size: 20px; padding-top: 0.5%; margin-bottom: 10px;">
                    <label class="text-light">{{image_form.project.label}}</label>
                </div>

                <div class="col-md form-labels">
                    {{ image_form.new_project(style="width:100%; height: 100%;", placeholder="New Project Name") }}
                </div>
                <div class="col-md form-labels">
                    {{ image_form.town(style="width:100%; height: 100%;", placeholder="Town") }}
                </div>
                <div class="col-md form-labels">
                    {{ image_form.owners_email(style="width:100%; height: 100%;", placeholder="Owner's Email") }}
                </div>
                <div class="col-md form-labels">
                    {{ image_form.project_date(style="width:100%; height: 100%;", placeholder="Project Date") }}
                </div>
            </div>

             <div class="col-md-auto form-labels">
                 <div class="col-md">
                     <div class="col-md-auto form-labels font-med-bold text-center" style="font-size: 20px; padding-top: 0.5%;">
                        <label class="text-light">{{image_form.image.label}}</label>
                    </div>
                     <div class="col-md">
                         {{ image_form.image(class="form-control", style="margin-top: 5%;", multiple="multiple") }}
                     </div>

                 </div>
            </div>
        </div>
        <div class="row justify-content-center text-center">
            <div class="col-md">
                <button class="buttons btn btn-outline-primary"
                    data-callback='onSubmit'
                    data-action='submit'
                    name="upload-image">Upload</button>
                <!--<p class="buttons"><input type="Submit" class="btn btn-outline" value="Send"></p>-->
            </div>
        </div>
    </form>
</div>

<div class="container-md admin-forms bg-dark bg-opacity-75" style="padding-top: 10px; max-width: 100%;">
    <h2 class="display-6 text-light">Pending Testimonials</h2>
    <div class="container-md" style="padding-top: 20px;">
        {% if pending_testimonials %}
        <table class="table table-hover table-light testimonial-table" align="center">
            <thead>
            </thead>
            <tbody>
                {% for i in pending_testimonials %}
                <tr>
                    <!--<th scope="row">1</th>-->
                  <td class="testimonial-column">
                      <h3 class="">{{i.name}}<small class="text-muted"> ({{ i.email }}) </small></h3>
                      <p class=""><i> {{i.town}}, NH</i></p>
                      <p class="testimonial-content text-center ">"{{i.message}}"</p>
                  </td>
                  <td class="button-column">
                      <form action="{{ url_for('blueprint.approve_testimonial', testimonial_id=i.testimonial_id) }}" method="post" class="buttons">
                          <input type="submit" value="Approve" name="approve-button" onclick="return confirm('Are you sure you want to approve this entry?');" class="btn btn-success">
                      </form>
                  </td>
                  <td class="button-column">
                      <form action="{{ url_for('blueprint.delete_testimonial_request', testimonial_id=i.testimonial_id) }}" method="post" class="buttons">
                          <input type="submit" value="Delete" name="delete-button" onclick="return confirm('Are you sure you want to delete this testimonial?');" class="btn btn-danger">
                      </form>
                  </td>
                </tr>
            {% endfor %}

            </tbody>
        </table>

        {% else %}
         <br>
         <h3 align="center" class="text-light">There's nothing pending right now.</h3>
        {% endif %}

    </div>

</div>



{% endblock %}
