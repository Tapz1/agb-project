{% extends 'layout.html' %}
{% set active_page = "admin" %}
{% block body %}
<div>
    <h1>Admin Portal</h1>
    <hr>
    <h4 class="font-weight-lighter">Hi, {{ name }}.
        <br> You can approve pending testimonials here.
    </h4>
    <br>
</div>


<div class="container-md">
    <form method="post" action="" class="">
        {% for field in form %}
        <div class="row align-items-center">
            <div class="col-4 text-md admin-forms font-med-bold">
                <label>Send a testimonial request</label>
            </div>
            <div class="row align-items-start admin-forms">
                <div class="col-4">
                    {{field(class="form-control", placeholder="Email")}}
                </div>
                <div class="col-md-auto" style="">
                    <button type="submit" class="btn btn-outline-success" name="send-request">Send</button>
                </div>
            </div>
        </div>
        {% endfor %}
    </form>
</div>

{% from "includes/_formhelpers.html" import render_field %}
<div style="margin-bottom: 20px;">
    <form method="post" action="" class="" enctype="multipart/form-data"><!-- enctype="multipart/form-data"-->
        <div class="row align-items-end">
            <!--{% from "includes/_formhelpers.html" import render_field %}-->
            <div class="col-4 text-md admin-forms font-med-bold" style="margin-top: 10px;">
                <label>Upload a photo</label>
            </div>
        </div>
        <div class="row align-items-start">
             <div class="col-4 admin-forms">
                {{ render_field(image_form.image, class="form-control", style="margin-top: -30px;") }}
            </div>
            <div class="col-md-auto">
                <button class="btn btn-outline-primary" type="submit" name="upload-image">Upload</button>
            </div>
        </div>
        <div class="row align-items-start">

        </div>
    </form>
</div>


<div class="container-md admin-forms" style="padding-top: 10px;">
    <h2>Pending Testimonials</h2>
    <div class="container-md" style="padding-top: 20px;">
        {% if pending_testimonials %}
        <table class="table table-hover table-light testimonial-table" align="center">
            <thead>
            </thead>
            <tbody>
                {% for i in pending_testimonials %}
                <tr>
                    <!--<th scope="row">1</th>-->
                  <td class="testimonial-column">
                      <h3>{{i.name}}<font size="-1"> ({{ email }}) </font></h3><p><i> {{i.city}}, {{i.state}}</i></p>
                      <p class="testimonial-content">{{i.message}}</p>
                  </td>
                  <td class="button-column">
                      <form action="{{ url_for('blueprint.approve_testimonial', testimonial_id=i.id) }}" method="post" class="buttons">
                          <input type="submit" value="Approve" name="approve-button" onclick="return confirm('Are you sure you want to approve this entry?');" class="btn btn-success">
                      </form>
                  </td>
                  <td class="button-column">
                      <form action="{{ url_for('blueprint.delete_testimonial_request', testimonial_id=i.id) }}" method="post" class="buttons">
                          <input type="submit" value="Delete" name="delete-button" onclick="return confirm('Are you sure you want to delete this testimonial?');" class="btn btn-danger">
                      </form>
                  </td>
                </tr>
            {% endfor %}

            </tbody>
        </table>

        {% else %}
         <br>
         <h3 align="center">That's awkward. There's nothing here....</h3>
        {% endif %}

    </div>

</div>



{% endblock %}
